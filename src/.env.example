# MobileID Environment Configuration Template
# Copy this file to .env and adjust values for your environment.
# Do not commit your actual .env file to version control.

# =============================================================================
# CORE SETTINGS
# =============================================================================

# Django Settings Module (Required)
# Options: core.settings.dev (Development), core.settings.prod (Production)
# Default: core.settings.dev
DJANGO_SETTINGS_MODULE=core.settings.dev

# Secret Key (Required)
# CRITICAL: Keep this secret in production!
# Generate a new key for production: python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
SECRET_KEY=change-me-to-a-secure-random-secret-key

# Debug Mode (Optional)
# Default: True (in dev), False (in prod)
# CRITICAL: Must be False in production
DEBUG=True

# Testing Mode (Optional)
# Set to True when running tests to use in-memory SQLite and disable throttling
# Default: False
TESTING=False

# Environment Name (Optional)
# Used for informational purposes
# Default: development
ENVIRONMENT=development

# Time Zone (Optional)
# Default: America/Los_Angeles
TIME_ZONE=America/Los_Angeles

# Log Level (Optional)
# Default: INFO
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO


# =============================================================================
# NETWORK & CORS
# =============================================================================

# Allowed Hosts (Required)
# Comma-separated list of hostnames that can serve the app
# Example: localhost,127.0.0.1,example.com
ALLOWED_HOSTS=localhost,127.0.0.1

# Backend Origin (Optional)
# The public URL of the backend API
# Default: http://localhost:8000
BACKEND_ORIGIN=http://localhost:8000

# CORS Allowed Origins (Required in Prod)
# Comma-separated list of frontend URLs allowed to make cross-origin requests
# Example: http://localhost:5173,http://localhost:8080
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://localhost:8080

# CSRF Trusted Origins (Optional)
# Comma-separated list of trusted origins for CSRF protection
# Auto-generated from BACKEND_ORIGIN and CORS_ALLOWED_ORIGINS if not set
# CSRF_TRUSTED_ORIGINS=http://localhost:8000,http://localhost:5173

# CORS Allow Credentials (Optional)
# Whether to allow credentials (cookies) in CORS requests
# Default: True
CORS_ALLOW_CREDENTIALS=True


# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Database Profile (Optional)
# Selects which database configuration strategy to use
# Options: local, gcp
# Default: local
DB_PROFILE=local

# Option 1: Database URL (Recommended)
# Format: engine://user:password@host:port/dbname

# Local Database URL (Used when DB_PROFILE=local)
# Example (MySQL): mysql://root:password@127.0.0.1:3306/mobileid
# Example (Postgres): postgres://user:pass@localhost:5432/mobileid
DATABASE_URL_LOCAL=mysql://root:password@127.0.0.1:3306/mobileid

# GCP Database URL (Used when DB_PROFILE=gcp)
# Example (Cloud SQL): postgres://user:pass@/dbname?host=/cloudsql/PROJECT:REGION:INSTANCE
DATABASE_URL_GCP=

# Option 2: Discrete Variables (Legacy Fallback)
# Used if no DATABASE_URL is provided
# DB_ENGINE=django.db.backends.postgresql
# DB_NAME=mobileid
# DB_USER=postgres
# DB_PASSWORD=password
# DB_HOST=localhost
# DB_PORT=5432

# Advanced Database Options (Optional)
# Persistent connection lifetime in seconds (Default: 60)
DB_CONN_MAX_AGE=60

# SSL Mode (Optional)
# Options: require, verify-ca, verify-full
# DB_SSL_MODE=require

# Disable SSL Verification (Optional)
# Useful for self-signed certs or development
# Default: False
# DB_SSL_DISABLE_VERIFY=False

# Cloud SQL Unix Socket (Optional)
# Path to Cloud SQL Unix socket (for GCP)
# CLOUDSQL_UNIX_SOCKET=/cloudsql/PROJECT:REGION:INSTANCE


# =============================================================================
# SECURITY SETTINGS
# =============================================================================

# Admin URL Path (Required in Prod)
# Custom path for the Django admin interface to hide it from scanners
# Default: admin
ADMIN_URL_PATH=admin

# Admin Allowed IPs (Required in Prod)
# Comma-separated list of IP addresses allowed to access the admin interface
# Default: Empty (allows all in dev, requires setting in prod)
ADMIN_ALLOWED_IPS=127.0.0.1

# Account Security (Optional)
# Max failed login attempts before lockout (Default: 5)
MAX_FAILED_LOGIN_ATTEMPTS=5
# Lockout duration in minutes (Default: 30)
ACCOUNT_LOCKOUT_DURATION=30

# Cookie Security (Optional - Forced True in Prod)
# Require HTTPS for session/CSRF cookies
# Default: False (in dev), True (in prod)
# SESSION_COOKIE_SECURE=False
# CSRF_COOKIE_SECURE=False

# Admin Session Age (Optional)
# Session duration for admin users in seconds (Default: 7200 / 2 hours)
ADMIN_SESSION_COOKIE_AGE=7200

# SSL Redirect (Optional - Forced True in Prod)
# Redirect all HTTP traffic to HTTPS
# Default: False (in dev), True (in prod)
# SECURE_SSL_REDIRECT=False

# HSTS Settings (Optional - Prod only)
# HTTP Strict Transport Security duration in seconds (Default: 63072000 / 2 years)
# SECURE_HSTS_SECONDS=63072000


# =============================================================================
# JWT & AUTHENTICATION
# =============================================================================

# JWT Refresh Token Lifetime (Optional)
# Validity period of refresh tokens in days
# Default: 7
JWT_REFRESH_TOKEN_LIFETIME_DAYS=7

# Login Challenge Settings (Optional)
# Time-to-live for login challenges in seconds (Default: 120)
LOGIN_CHALLENGE_TTL_SECONDS=120
# Nonce size in bytes (Default: 16)
LOGIN_CHALLENGE_NONCE_BYTES=16

# RSA Private Key (Legacy/Optional)
# Legacy support for file-based keys. Prefer using database keys via:
# python manage.py generate_rsa_keypair
# RSA_PRIVATE_KEY=


# =============================================================================
# CACHE & SESSION
# =============================================================================

# Cache Backend (Optional)
# Default: django.core.cache.backends.locmem.LocMemCache
# CACHE_BACKEND=django.core.cache.backends.locmem.LocMemCache

# Cache Location (Optional)
# CACHE_LOCATION=unique-snowflake

# Session Engine (Optional)
# Default: django.contrib.sessions.backends.db
# SESSION_ENGINE=django.contrib.sessions.backends.db


# =============================================================================
# CONTENT SECURITY POLICY (CSP)
# =============================================================================

# CSP Default Policy (Optional)
# Default policy string for Content-Security-Policy header
# CSP_DEFAULT_POLICY="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:"


# =============================================================================
# EXAMPLES
# =============================================================================

# --- DEVELOPMENT EXAMPLE ---
# DJANGO_SETTINGS_MODULE=core.settings.dev
# SECRET_KEY=dev-secret-key
# DEBUG=True
# ALLOWED_HOSTS=localhost,127.0.0.1
# CORS_ALLOWED_ORIGINS=http://localhost:5173
# DATABASE_URL_LOCAL=sqlite:///db.sqlite3

# --- PRODUCTION EXAMPLE ---
# DJANGO_SETTINGS_MODULE=core.settings.prod
# SECRET_KEY=very-complex-production-secret-key-generated-randomly
# DEBUG=False
# ALLOWED_HOSTS=api.example.com
# BACKEND_ORIGIN=https://api.example.com
# CORS_ALLOWED_ORIGINS=https://app.example.com
# DB_PROFILE=gcp
# DATABASE_URL_GCP=postgres://user:pass@/dbname?host=/cloudsql/project:region:instance
# ADMIN_URL_PATH=secure-admin-portal
# ADMIN_ALLOWED_IPS=10.0.0.5,192.168.1.100
